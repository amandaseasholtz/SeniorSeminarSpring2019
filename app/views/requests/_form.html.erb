<div class="nav">
<% if account_signed_in? %>
    <ul>
      <li> <%= link_to "Home", homepage_index_path %> </li>
      <% if current_account.accountable_type == "Budget" %>
        <li> <%= link_to "Approve Budgets", requests_path%> </li>
        <li> <%= link_to "Travel History", say_history_path %> </li>
        <li> <%= link_to "Post-Travel", new_post_travel_path%> </li>
        <li><%= link_to 'My Info', edit_budget_path(current_account.accountable_id), class: "dropdown-item"  %></li>
        <li><%= link_to 'Account Settings', edit_account_registration_path, class: "dropdown-item"  %></li>
        <li><%= link_to 'Sign out', destroy_account_session_path, :method=>'delete', class:"nav-link" %><li>
      <%end%>

      <% if current_account.accountable_type == "Payment" %>
        <li><%= link_to 'Approve Payments', requests_path %> </li>
        <li> <%= link_to "Travel History", requests_path%> </li>
        <li> <%= link_to "Manage Post-Travels", post_travels_path%> </li>
        <li> <%= link_to 'My Info', edit_payment_path(current_account.accountable_id), class: "dropdown-item"  %></li>
        <li><%= link_to 'Account Settings', edit_account_registration_path, class: "dropdown-item"  %></li>
        <li><%= link_to 'Sign out', destroy_account_session_path, :method=>'delete', class:"nav-link" %><li>
      <%end%>


      <% if current_account.accountable_type == "Employee" %>
        <li><%= link_to "Request Travel", new_request_path(spa: false) %></li>
        <li><%= link_to "Request Travel (SPA)", new_request_path(spa: true) %></li>
        <li> <%= link_to "Travel History", requests_path%> </li>
        <li> <%= link_to "Post-Travels", new_post_travel_path%> </li>
        <li> <%= link_to "post Travels history", post_travels_path%> </li>
        <li><%= link_to 'My Info', edit_employee_path(current_account.accountable_id), class: "dropdown-item" %> </li>
        <li><%= link_to 'Account Settings', edit_account_registration_path, class: "dropdown-item"  %></li>
        <li><%= link_to 'Sign out', destroy_account_session_path, :method=>'delete', class:"nav-link" %><li>
      <%end%>

      <%if current_account.accountable_type == "SuperAccount" %>
        <li><a class = "nav-link" href = "/admin">Admin Dasboard</a></li>
        <li><%= link_to 'Sign out', destroy_account_session_path, :method=>'delete', class:"nav-link" %><li>
      <%end%>
    </ul>
  <%else%>
    <ul>
      <li> <%= link_to "Home", homepage_index_path %> </li>
      <li><%= link_to 'Sign in', new_account_session_path%></li>
      <li><%= link_to 'Sign up', new_account_registration_path%></li>
    </ul>
    <%end%>
</div>

<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

	<title>Booking Form HTML Template</title>

	<!-- Google font -->
	<link href="http://fonts.googleapis.com/css?family=Playfair+Display:900" rel="stylesheet" type="text/css" />
	<link href="http://fonts.googleapis.com/css?family=Alice:400,700" rel="stylesheet" type="text/css" />

	<!-- Bootstrap -->
	<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />

	<!-- Custom stlylesheet -->
	<link type="text/css" rel="stylesheet" href="css/style.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

</head>

<body>
	<div id="booking" class="section">
		<div class="section-center">

				<div class="row">
					<div class="booking-form">

            <%= form_with(model: request, local: true) do |f| %>
              <% if request.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(request.errors.count, "error") %>
                  prohibited this request from being submitted:</h2>
                  <ul>
                    <% request.errors.full_messages.each do |message| %>
                      <li><%= message %></li>
                    <% end %>
                  </ul>

                </div>
              <% end %>

            <div class="field">
              <p class="rounded">
                <span class="f-label">Name</span>
                <%= f.text_field :name, id: :employee_name %>
              </p>
            </div>


            <div class="field">
            <span class="f-label">Destination</span>
              <%= f.text_field :destination, id: :request_destination, size: 40 %>
            </div>

							<div class="row">
							  <!--	<div class="col-md-6">
									<div class="f-group">
										<span class="f-label">Start Date</span>
										<input class="f-control" type="date" required>
									</div>
                </div>-->

                <!-- <div class="col-md-6">
                  <div class="f-group">
                    <span class="f-label">End Date</span>
                    <input class="f-control" type="date" required>
                  </div>
                </div> -->
                <div class="col-md-6">
                  <span class="f-label">Start Date</span>
                    <%= f.date_select :start_date, {:order => [:month, :day, :year],:prompt => true, :start_year => Time.now.year, :end_year => 2030} %>
                </div>
                <div class="col-md-6">
                  <span class="f-label">End Date</span>
                    <%= f.date_select :end_date, {:order => [:month, :day, :year],:prompt => true, :start_year => Time.now.year, :end_year => 2030} %>
                </div>

                </div>







							<%if request.name == nil%>
            <div class="field">
            <span class="f-label">Purpose</span>
            <div class="f-group">
              <%= f.text_area :purpose, id: :request_purpose, rows: 10, cols: 60 %>
            </div>
            </div>


						<div class="row">


						<tbody class='expenses'>
						<%= f.simple_fields_for :expected_expense do |builder| %>
							<%= render 'expected_expense_fields', f: builder %>
							<%end%>
							<%= link_to_add_association 'Add expense', f,  :expected_expenses, class: 'btn btn-primary'%>

					</tbody>


					<tbody class='costs'>
					<%= f.simple_fields_for :expected_cost do |builder| %>
						<%= render 'expected_cost_fields', f: builder %>
						<%end%>
						<%= link_to_add_association 'Add cost', f,  :expected_costs, class: 'btn btn-primary'%>
					</tbody>





					<tbody class='pays'>
					<%= f.simple_fields_for :payment_information do |builder| %>
					<%= render 'payment_information_fields', f: builder %>
					<%end%>
					<%= link_to_add_association 'Add pay from Department', f,  :payment_informations, class: 'btn btn-primary'%>

					</tbody>

					</div>




          	<div class="row">
								<div class="col-md-6">
									<div class="f-group">

               </div>
                </div>
               </div>

							 <%else %>

							 <%end%>


							<div class="f-btn">
                <button class="submit-btn">Submit Request</button>


                </div>
<%end%>
					</div>
			</div>
		</div>
	</div>
</body>

</html>
